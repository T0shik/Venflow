# Venflow

<a href="https://www.nuget.org/packages/Venflow"><img alt="Nuget" src="https://img.shields.io/nuget/v/Venflow"></a> <a href="https://www.nuget.org/packages/Venflow"><img alt="Nuget" src="https://img.shields.io/nuget/dt/Venflow"></a> <a href="https://github.com/TwentyFourMinutes/Venflow/issues"><img alt="GitHub issues" src="https://img.shields.io/github/issues-raw/TwentyFourMinutes/DulcisX"></a> <a href="https://github.com/TwentyFourMinutes/Venflow/blob/master/LICENSE"><img alt="GitHub" src="https://img.shields.io/github/license/TwentyFourMinutes/DulcisX"></a> <a href="https://discordapp.com/invite/EYKxkce"><img alt="Discord" src="https://discordapp.com/api/guilds/275377268728135680/widget.png"></a>

Venflow is a brand new and from the ground up written ORM which tries to provide an alternative to EF-Core and many other ORMs. It allows you to define Models and their relations with each other. Additionally it maps all queries on its own while still maintaining great performance, with options for custom SQL.

## About

Lets face it, EF-Core is awesome, but it can be slow, really slow. However this library tries to overcome that by providing similar features while maintaining great performance. Venflow comes with a very similar UX to Dapper and EF-Core, in order to keep the learning curve as low as possible. 

#### Features

- Simple change-tracking for update operations
- Autogenerated Inserts
- Autogenerated Deletes
- Autogenerated Query Materializer, Join Generator
- SQL Injection safe string Interpolated SQL


### Collaboration

If you want to collaborate on this project more, than creating issues and PR's, feel free to contact me on any of the mentioned contacts at the bottom of the file.

How you can help other than that? This can be done in numerous ways, over on the issue section, such as:

- Creating feature requests
- Creating pull requests
- Reporting bugs

## Installation

The alpha versions of Venflow can currently be downloaded on [nuget.org](https://www.nuget.org/packages/Venflow). However please do note that since this package is still in beta, it may still contain bugs and other issues.

Also you can install it via the **P**ackage **M**anager **C**onsole:

```
Install-Package Venflow
```

## Comparison

Benchmarking ORM's isn't quite an easy task, since there are a bunch of different factors which can alter the result in one way or another. I do not show any beautiful graphs here for the simple reason, that showing them would be pretty impractical, since there would be just too many. That is also the reason why I tried to come up with a composite number based on the benchmark results. If you still want check all the individual benchmarks, which you defiantly should, the source code can be found [here](https://github.com/TwentyFourMinutes/Venflow/tree/dev/src/Venflow/Venflow.Benchmarks) and the results as `.csv` and `.md` are over [here](https://github.com/TwentyFourMinutes/Venflow/tree/dev/benchmarks).

Lets just directly hop into the composite numbers of each tested ORM.


| ORM Name                                                   | Composite Score* | Mean Score* | Allocation Score* |
| :--------------------------------------------------------- | :--------------: | :---------: | :---------------: |
| #1 [Venflow](https://github.com/TwentyFourMinutes/Venflow) |      9.204       |    8.463    |       0.741       |
| #2 [Dapper](https://github.com/StackExchange/Dapper)**     |      16.794      |   13.076    |       3.718       |
| #3 [RepoDb](https://github.com/mikependon/RepoDb)**        |      49.494      |   43.254    |       6.240       |
| #4 [EFCore](https://github.com/dotnet/efcore)              |     245.869      |   195.152   |      50.717       |

\* Lower is considered to be better </br>
\*\* Do have missing benchmark entries for specific benchmark groups and therefor either might have better/worse scores.

Now how do I calculate this _magic number_? The formula is as following: 
```
compositeScore = Î£((meanTime / lowestMeanTimeOfGroup - 1) + (allocation / lowestAllocationOfGroup - 1) / 10)
```
A group is considered as a list of benchmark entries which are inside the same file and have the same \*count and target framework. Now as some ORM's don't have any benchmarks entries for specific benchmark groups it will take instead take the _lowest_ mean and the _lowest_  allocation from this group. The source code of the calculation can be found [here](https://github.com/TwentyFourMinutes/Venflow/tree/dev/src/Venflow/Venflow.Score).

#### Disclaimer

The benchmarks themselves or even the calculation of the composite numbers may not be right and contain bugs. Therefor consider these results with a grain of salt. If you find any bugs inside the calculations or in the benchmarks please create an issue and I'll try to fix it ASAP.

## Is this package for you?

This package is more a competitor to Dapper than EF-Core since it supports Linq2Sql, Database first and migrations, which both Dapper and Venflow don't support out of the box. On the other hand you need to consider the Database you will end up using, if you aren't using PostgreSQL you will have to use a different ORM, at least at this state of the project. 

#### But why should I use Venflow over Dapper anyway?

Venflow supports a lot more things out of the box, such as automatic generated Delete/Insert statements, as well as simple change tracking to easily update specific entities. Another big factor, which probably is one of the biggest differences to Dapper, are the automatically generated materializers for queries. A lot of the times a materializer generated by Venflow will _always_ be faster, especially for bigger tables, than a hand written Dapper one. This is due to the nature of how Dapper and Venflow handle the parsing of SQL results.

## Road map

- Composed PK support
- Direct support for many to many relations

### Acknowledgements

I also want to mention all the other great ORM's out there, build by awesome people, which helped with building Venflow in one way or another.

- [EF-Core](https://github.com/dotnet/efcore) by [Microsoft and the .Net team](https://github.com/dotnet)
- [RepoDb](https://github.com/mikependon/RepoDb) by [mikependon](https://github.com/mikependon)

## Notes
### Contact information

If you feel like something is not working as intended or you are experiencing issues, feel free to create an issue. Also for feature requests just create an issue. For further information feel free to send me a [mail](mailto:office@twenty-four.dev) to `office@twenty-four.dev` or message me on Discord `24_minutes#7496`.

## Sponsors

I wanna thank [JetBrains](https://www.jetbrains.com/?from=DulcisX) for providing me and the project with a free Open Source license for their whole JetBrains suite. Their Tools greatly improve the development speed of this Project. If you want to get a free Open Source license for your own project and their collaborators, visit their [Open Source page](https://www.jetbrains.com/opensource/).

<a href="https://www.jetbrains.com/?from=DulcisX"><img width="350px" src="images/jetbrains_logo.png"></a>